import{a2 as g,_ as I,d as c,f as D,g as f,h as l,w as a,F as B,E as C,o as F,i as d,j as M,k,l as w}from"./index-38d0c93f.js";import{E as i,a as S,b as T,c as v}from"./el-table-column-991ef629.js";import{E}from"./el-pagination-a554dfd3.js";/* empty css                   */import{c as $}from"./cloneDeep-0823f200.js";const U=e=>g.request({url:"api/major/page",method:"post",data:e}),P=e=>g.request({url:"api/major/add",method:"post",data:e}),q=e=>g.request({url:"api/major/delete",params:e}),z=e=>g.request({url:"api/major/edit",method:"post",data:e}),N=e=>g.request({url:"api/major/getMajorForSelectByDepartId",params:e}),L=e=>g.request({url:"api/major/getMajorsForSelectByDepart",params:e}),W=e=>g.request({url:"api/major/getMajorsForSelectBySchoolId",params:e}),A=e=>g.request({url:"api/major/one",params:e}),G=c({data(){return{searchText:"",majors:[],major:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,dialogFormVisibleByDepartId:!1,dialogFormVisibleByDepart:!1,dialogFormVisibleBySchoolId:!1,dialogFormVisibleById:!1,Major:{id:0,majorName:"",majorDesc:"",departId:0,createTime:"",updateTime:"",deleted:0,schoolId:0},formLabelWidth:80}},mounted(){this.getMajorsPage(1)},methods:{toEdit(e){this.dialogFormVisible=!0,this.Major=$(e)},getMajorsPage(e){U({current:e,size:4}).then(r=>{const n=r.data.page;this.majors=n.records,this.page=n}).catch(r=>{console.log(r)})},getMajorsByDepartID(e){N({departId:e}).then(r=>{this.dialogFormVisibleByDepartId=!1;const n=r.data.majors;this.majors=n,i("查询成功")}).catch(r=>{console.log(r),i("查询失败，没有该学院")})},getMajorsByDepart(e){L({depart:e}).then(r=>{this.dialogFormVisibleByDepart=!1;const n=r.data.majors;this.majors=n,i("查询成功")}).catch(r=>{i("查询失败，没有该学院"),console.log(r)})},getMajorsBySchoolId(e){W({schoolId:e}).then(r=>{this.dialogFormVisibleBySchoolId=!1;const n=r.data.majors;this.majors=n,console.log(this.majors),i("查询成功")}).catch(r=>{i("查询失败，没有该学校"),console.log(r)})},getMajorsById(e){this.major=[],A({id:e}).then(r=>{this.dialogFormVisibleById=!1,this.major.push(r.data.major);const n=this.major;this.majors=n,i("查询成功")}).catch(r=>{i("查询失败，没有该专业"),console.log(r)})},currentchange(e){this.getMajorsPage(e),this.page.current=e},del(e){confirm("是否删除")==!0&&(console.log(e),q({id:e}).then(r=>{if(r.success)this.getMajorsPage(this.page.current);else return console.log(r.msg),!1}).catch(r=>{i("删除失败")}))},toAdd(){this.dialogFormVisible=!0},selectByDepartId(){this.dialogFormVisibleByDepartId=!0},selectByDepart(){this.dialogFormVisibleByDepart=!0},selectBySchoolId(){this.dialogFormVisibleBySchoolId=!0},selectById(){this.dialogFormVisibleById=!0},refresh(){this.getMajorsPage(1)},save(){const e=this.Major;e.id==0?P(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getMajorsPage(this.page.current),i(o.msg);else return i(o.msg),!1}).catch(o=>{i("网络错误联系管理员")}):z(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getMajorsPage(this.page.current),i(o.msg);else return i(o.msg),!1}).catch(o=>{i("网络错误联系管理员")})}}}),H={class:"majors"},J={class:"major-tools"},K={class:"dialog-footer"},O={class:"dialog-footer"},Q={class:"dialog-footer"},R={class:"dialog-footer"},X={class:"dialog-footer"};function Y(e,o,r,n,Z,_){const s=C,m=v,b=S,V=E,p=M,u=k,h=w,j=T;return F(),D(B,null,[f("div",H,[f("div",J,[l(s,{type:"warning",onClick:e.toAdd},{default:a(()=>[d("添加")]),_:1},8,["onClick"]),l(s,{type:"warning",onClick:e.selectByDepartId},{default:a(()=>[d("按学院ID查询数据")]),_:1},8,["onClick"]),l(s,{type:"warning",onClick:e.selectByDepart},{default:a(()=>[d("按学院名称查询数据")]),_:1},8,["onClick"]),l(s,{type:"warning",onClick:e.selectBySchoolId},{default:a(()=>[d("按学校ID查询数据")]),_:1},8,["onClick"]),l(s,{type:"warning",onClick:e.selectById},{default:a(()=>[d("按专业ID查询数据")]),_:1},8,["onClick"]),l(s,{type:"warning",onClick:e.refresh},{default:a(()=>[d("刷新查询")]),_:1},8,["onClick"])]),l(b,{data:e.majors,style:{width:"100%"}},{default:a(()=>[l(m,{fixed:"",prop:"id",width:"150"}),l(m,{prop:"majorName",label:"专业名称",width:"120"}),l(m,{prop:"majorDesc",label:"专业描述",width:"120"}),l(m,{prop:"departId",label:"学院ID",width:"120"}),l(m,{prop:"createTime",label:"创建时间",width:"120"}),l(m,{prop:"updateTime",label:"更新时间",width:"120"}),l(m,{prop:"deleted",label:"删除",width:"120"}),l(m,{prop:"schoolId",label:"学校ID",width:"120"}),l(m,{fixed:"right",label:"功能管理",width:"120"},{default:a(t=>[l(s,{link:"",type:"primary",size:"small",onClick:y=>e.toEdit(t.row)},{default:a(()=>[d("更新")]),_:2},1032,["onClick"]),l(s,{link:"",type:"primary",size:"small",onClick:y=>e.del(t.row.id)},{default:a(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(V,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(j,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[5]||(o[5]=t=>e.dialogFormVisible=t),title:"专业信息编辑"},{footer:a(()=>[f("span",K,[l(s,{onClick:o[4]||(o[4]=t=>e.dialogFormVisible=!1)},{default:a(()=>[d("Cancel")]),_:1}),l(s,{type:"primary",onClick:e.save},{default:a(()=>[d("保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[l(h,{model:e.Major},{default:a(()=>[l(u,{label:"专业名称","label-width":e.formLabelWidth},{default:a(()=>[l(p,{modelValue:e.Major.majorName,"onUpdate:modelValue":o[0]||(o[0]=t=>e.Major.majorName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"专业描述","label-width":e.formLabelWidth},{default:a(()=>[l(p,{modelValue:e.Major.majorDesc,"onUpdate:modelValue":o[1]||(o[1]=t=>e.Major.majorDesc=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"学院ID","label-width":e.formLabelWidth},{default:a(()=>[l(p,{modelValue:e.Major.departId,"onUpdate:modelValue":o[2]||(o[2]=t=>e.Major.departId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(u,{label:"学校ID","label-width":e.formLabelWidth},{default:a(()=>[l(p,{modelValue:e.Major.schoolId,"onUpdate:modelValue":o[3]||(o[3]=t=>e.Major.schoolId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(j,{modelValue:e.dialogFormVisibleByDepartId,"onUpdate:modelValue":o[9]||(o[9]=t=>e.dialogFormVisibleByDepartId=t),title:"学院ID查询"},{footer:a(()=>[f("span",O,[l(s,{onClick:o[7]||(o[7]=t=>e.dialogFormVisibleByDepartId=!1)},{default:a(()=>[d("Cancel")]),_:1}),l(s,{type:"primary",onClick:o[8]||(o[8]=t=>e.getMajorsByDepartID(e.searchText))},{default:a(()=>[d("查询 ")]),_:1})])]),default:a(()=>[l(h,{model:e.Major},{default:a(()=>[l(u,{label:"请输入学院ID","label-width":120},{default:a(()=>[l(p,{modelValue:e.searchText,"onUpdate:modelValue":o[6]||(o[6]=t=>e.searchText=t),placeholder:"按学院ID搜索专业，请输入学院ID",clearable:"",onClear:e.clearSearch,style:{"margin-bottom":"20px"}},null,8,["modelValue","onClear"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(j,{modelValue:e.dialogFormVisibleByDepart,"onUpdate:modelValue":o[13]||(o[13]=t=>e.dialogFormVisibleByDepart=t),title:"学院名称查询"},{footer:a(()=>[f("span",Q,[l(s,{onClick:o[11]||(o[11]=t=>e.dialogFormVisibleByDepart=!1)},{default:a(()=>[d("Cancel")]),_:1}),l(s,{type:"primary",onClick:o[12]||(o[12]=t=>e.getMajorsByDepart(e.searchText))},{default:a(()=>[d("查询 ")]),_:1})])]),default:a(()=>[l(h,{model:e.Major},{default:a(()=>[l(u,{label:"请输入学院名称","label-width":120},{default:a(()=>[l(p,{modelValue:e.searchText,"onUpdate:modelValue":o[10]||(o[10]=t=>e.searchText=t),placeholder:"按学院名称搜索专业，请输入学院名称",clearable:"",onClear:e.clearSearch,style:{"margin-bottom":"20px"}},null,8,["modelValue","onClear"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(j,{modelValue:e.dialogFormVisibleBySchoolId,"onUpdate:modelValue":o[17]||(o[17]=t=>e.dialogFormVisibleBySchoolId=t),title:"学校ID查询"},{footer:a(()=>[f("span",R,[l(s,{onClick:o[15]||(o[15]=t=>e.dialogFormVisibleBySchoolId=!1)},{default:a(()=>[d("Cancel")]),_:1}),l(s,{type:"primary",onClick:o[16]||(o[16]=t=>e.getMajorsBySchoolId(e.searchText))},{default:a(()=>[d("查询 ")]),_:1})])]),default:a(()=>[l(h,{model:e.Major},{default:a(()=>[l(u,{label:"请输入学校ID","label-width":120},{default:a(()=>[l(p,{modelValue:e.searchText,"onUpdate:modelValue":o[14]||(o[14]=t=>e.searchText=t),placeholder:"按学校ID搜索专业，请输入学校ID",style:{"margin-bottom":"20px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(j,{modelValue:e.dialogFormVisibleById,"onUpdate:modelValue":o[21]||(o[21]=t=>e.dialogFormVisibleById=t),title:"专业ID查询"},{footer:a(()=>[f("span",X,[l(s,{onClick:o[19]||(o[19]=t=>e.dialogFormVisibleById=!1)},{default:a(()=>[d("Cancel")]),_:1}),l(s,{type:"primary",onClick:o[20]||(o[20]=t=>e.getMajorsById(e.searchText))},{default:a(()=>[d("查询 ")]),_:1})])]),default:a(()=>[l(h,{model:e.Major},{default:a(()=>[l(u,{label:"请输入专业ID","label-width":120},{default:a(()=>[l(p,{modelValue:e.searchText,"onUpdate:modelValue":o[18]||(o[18]=t=>e.searchText=t),placeholder:"按专业ID搜索专业，请输入专业ID",style:{"margin-bottom":"20px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const te=I(G,[["render",Y]]);export{te as default};
