import{a7 as E,a2 as u,_ as C,d as k,f as v,g as c,h as l,w as a,F as q,E as I,j as $,o as U,i as n,k as N,l as j}from"./index-246d8de8.js";import{E as r,a as D,b as B,c as T,g as A,h as P}from"./el-table-column-2eb1b86e.js";const z=e=>u.request({url:"/api/folder/add",method:"post",data:e}),h=()=>u.request({url:"/api/folder/all",method:"get"}),R=e=>u.request({url:`/api/folder/delete/${e}`,method:"get"}),b=e=>u.request({url:"api/folder/edit",method:"post",data:e}),L=e=>u.request({url:`/api/folder/one/${e}`,method:"get"}),M=e=>u.request({url:`/api/folder/query/${e}`,method:"get"}),g=E.create({baseURL:"http://api.jqrjq.cn",withCredentials:!0});g.interceptors.request.use(e=>e,e=>Promise.reject(e));g.interceptors.response.use(e=>e,e=>Promise.reject(e));const O=k({data(){return{folders:[],dialogFormVisible:!1,folder:{icon:"",id:"",name:"",pid:0,status:!0},searchInput:""}},mounted(){this.fetchFolders()},methods:{fetchFolders(){h().then(e=>{this.folders=e.data.folders}).catch(e=>{console.error("获取文件夹信息失败:",e)})},toAdd(){this.dialogFormVisible=!0,this.folder={icon:"",id:"",name:"",pid:0,status:!0}},save(){this.folder.id?b(this.folder).then(()=>{this.fetchFolders(),this.dialogFormVisible=!1,r.success("修改文件夹成功")}).catch(e=>{console.error("修改文件夹失败:",e),r.error("修改文件夹失败")}):z(this.folder).then(()=>{this.fetchFolders(),this.dialogFormVisible=!1,r.success("添加文件夹成功")}).catch(e=>{console.error("添加文件夹失败:",e),r.error("添加文件夹失败")})},del(e){R(e).then(()=>{r.success("删除文件夹成功"),this.fetchFolders()}).catch(o=>{console.error("删除文件夹失败:",o),r.error("删除文件夹失败")})},toEdit(e){this.folder={...e},this.dialogFormVisible=!0},update(){b(this.folder).then(e=>(console.log("Response:",e),console.log("Data Type:",typeof e.data),h())).then(e=>{this.dialogFormVisible=!1,this.folders=e,r.success("修改文件夹成功")}).catch(e=>{console.error("修改文件夹失败:",e),r.error("修改文件夹失败")})},searchFolder(){const e=this.searchInput.trim(),o=parseInt(e,10);isNaN(o)?e!==""?M(e).then(d=>{d.data&&d.data.folders?(this.folders=d.data.folders,console.log("搜索结果：",this.folders)):(console.log("未找到文件夹"),this.folders=[]),console.log("服务器返回的数据：",d.data)}).catch(d=>{console.error("搜索文件夹失败：",d)}):this.fetchFolders():L(o).then(d=>{d.data&&d.data.folder?(this.folders=[d.data.folder],console.log("搜索结果：",this.folders)):(console.log("未找到文件夹"),this.folders=[]),console.log("服务器返回的数据：",d.data)}).catch(d=>{console.error("搜索文件夹失败：",d)})}}}),S={class:"file-info"},G={class:"adcate-tools"},H={class:"dialog-footer"};function J(e,o,d,K,Q,W){const s=I,f=$,i=T,V=D,p=N,m=A,_=P,F=j,w=B;return U(),v(q,null,[c("div",S,[c("div",G,[l(s,{type:"warning",onClick:e.toAdd},{default:a(()=>[n("添加文件夹")]),_:1},8,["onClick"]),l(f,{modelValue:e.searchInput,"onUpdate:modelValue":o[0]||(o[0]=t=>e.searchInput=t),placeholder:"请输入ID或文件名",clearable:"",style:{width:"200px"}},null,8,["modelValue"]),l(s,{type:"primary",onClick:e.searchFolder},{default:a(()=>[n("查询")]),_:1},8,["onClick"])]),l(V,{data:e.folders,style:{width:"100%"}},{default:a(()=>[l(i,{fixed:"",prop:"icon",label:"图标",width:"150"}),l(i,{prop:"id",label:"编号",width:"150"}),l(i,{prop:"name",label:"文件夹名称",width:"250"}),l(i,{fixed:"",prop:"pid",label:"父编号",width:"150"}),l(i,{prop:"status",label:"文件类型",width:"150"}),l(i,{prop:"type",label:"操作",width:"150"},{default:a(t=>[l(s,{type:"primary",size:"small",onClick:y=>e.toEdit(t.row)},{default:a(()=>[n("修改")]),_:2},1032,["onClick"]),l(s,{type:"danger",size:"small",onClick:y=>e.del(t.row.id)},{default:a(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),l(w,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[7]||(o[7]=t=>e.dialogFormVisible=t),title:"文件夹编辑"},{footer:a(()=>[c("span",H,[l(s,{onClick:o[6]||(o[6]=t=>e.dialogFormVisible=!1)},{default:a(()=>[n("取消")]),_:1}),l(s,{type:"primary",onClick:e.save},{default:a(()=>[n("保存")]),_:1},8,["onClick"])])]),default:a(()=>[l(F,{model:e.folder},{default:a(()=>[l(p,{label:"图标","label-width":100},{default:a(()=>[l(f,{modelValue:e.folder.icon,"onUpdate:modelValue":o[1]||(o[1]=t=>e.folder.icon=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(p,{label:"编号","label-width":100},{default:a(()=>[l(f,{modelValue:e.folder.id,"onUpdate:modelValue":o[2]||(o[2]=t=>e.folder.id=t),autocomplete:"off",readonly:"",placeholder:e.folder.id===""?"自动生成ID,无需编辑":""},null,8,["modelValue","placeholder"])]),_:1}),l(p,{label:"文件夹名称","label-width":100},{default:a(()=>[l(f,{modelValue:e.folder.name,"onUpdate:modelValue":o[3]||(o[3]=t=>e.folder.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(p,{label:"父编号","label-width":100},{default:a(()=>[l(f,{modelValue:e.folder.pid,"onUpdate:modelValue":o[4]||(o[4]=t=>e.folder.pid=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(p,{label:"文件类型","label-width":100},{default:a(()=>[l(_,{modelValue:e.folder.status,"onUpdate:modelValue":o[5]||(o[5]=t=>e.folder.status=t),placeholder:"请选择文件类型"},{default:a(()=>[l(m,{label:"公开",value:"0"}),l(m,{label:"会员",value:"1"}),l(m,{label:"私有",value:"2"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Z=C(O,[["render",J],["__scopeId","data-v-6e933db5"]]);export{Z as default};
