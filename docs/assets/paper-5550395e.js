import{a7 as C,a2 as m,_ as y,d as k,f as E,g as b,h as a,w as o,F as I,E as F,j as U,o as L,i as u,k as W,l as z}from"./index-246d8de8.js";import{E as n,a as A,b as v,c as T}from"./el-table-column-2eb1b86e.js";import{E as q}from"./el-pagination-095be88e.js";import{c as $}from"./cloneDeep-a88c035e.js";const D=e=>m.request({url:"api/paper/page",method:"post",data:e}),j=e=>m.request({url:"api/paper/delete",method:"get",params:e}),N=e=>m.request({url:"api/paper/add",method:"post",data:e}),B=e=>m.request({url:"api/paper/edit",method:"post",data:e}),f=C.create({baseURL:"http://api.jqrjq.cn",withCredentials:!0});f.interceptors.request.use(e=>e,e=>Promise.reject(e));f.interceptors.response.use(e=>e,e=>Promise.reject(e));const S=k({data(){return{Papers:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,Paper:{attachment:"",count:0,id:0,name:"",publication:"",publicationCate:"",publishTime:"",type:"",userId:0},formLabelWidth:80}},mounted(){this.getAdCatesPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.Paper=$(e)},getAdCatesPage(e){D({current:e,size:2}).then(r=>{console.log(r);const h=r.data.page;this.Papers=h.records,this.page=h}).catch(r=>{console.log(r)})},currentchange(e){this.getAdCatesPage(e),this.page.current=e},del(e){console.log(e),j({id:e}).then(r=>{if(r.success)this.getAdCatesPage(this.page.current);else return console.log(r.msg),!1}).catch(r=>{})},toAdd(){this.dialogFormVisible=!0,this.Paper={attachment:"",count:0,id:0,name:"",publication:"",publicationCate:"",publishTime:"",type:"",userId:0}},searchPaper(){const e=parseInt(this.searchId);if(isNaN(e)){n.warning("请输入有效的ID");return}console.log("Searching Paper with ID:",e),getOnePaper(e).then(l=>{if(console.log("Search result:",l),l.success){const r=l.data.records;this.Papers=[r],this.page={total:1,current:1,size:this.page.size}}else n.error(l.msg)}).catch(l=>{n.error("网络错误，请联系管理员")})},save(){const e=this.Paper;e.id==0?N(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getAdCatesPage(this.page.current),n(l.msg);else return n(l.msg),!1}).catch(l=>{n("网络错误联系管理员")}):B(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getAdCatesPage(this.page.current),n(l.msg);else return n(l.msg),!1}).catch(l=>{n("网络错误联系管理员")})}}}),M={class:"Papers"},O={class:"Paper-tools"},R={class:"dialog-footer"};function G(e,l,r,h,H,J){const p=F,i=U,s=T,g=A,c=q,d=W,P=z,V=v;return L(),E(I,null,[b("div",M,[b("div",O,[a(p,{type:"warning",onClick:e.toAdd},{default:o(()=>[u("添加")]),_:1},8,["onClick"]),a(i,{modelValue:e.searchId,"onUpdate:modelValue":l[0]||(l[0]=t=>e.searchId=t),placeholder:"请输入ID",clearable:"",style:{width:"120px"}},null,8,["modelValue"]),a(p,{type:"primary",onClick:e.searchPaper},{default:o(()=>[u("搜索")]),_:1},8,["onClick"])]),a(g,{data:e.Papers,style:{width:"100%"}},{default:o(()=>[a(s,{fixed:"",prop:"attachment",label:"佐证材料",width:"120"}),a(s,{prop:"count",label:"引用次数",width:"120"}),a(s,{prop:"id",label:"论文编号",width:"120"}),a(s,{prop:"name",label:"论文题目",width:"120"}),a(s,{prop:"publication",label:"刊物",width:"120"}),a(s,{prop:"publicationCate",label:"刊物种类",width:"120"}),a(s,{prop:"publishTime",label:"发表时间",width:"120"}),a(s,{prop:"type",label:"论文类型",width:"120"}),a(s,{prop:"userId",label:"作者",width:"120"}),a(s,{prop:"type",label:"修改操作",width:"120"},{default:o(t=>[a(p,{link:"",type:"primary",size:"small",onClick:w=>e.toEdit(t.row)},{default:o(()=>[u("更新")]),_:2},1032,["onClick"]),a(p,{link:"",type:"primary",size:"small",onClick:w=>e.del(t.row.id)},{default:o(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(c,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),a(V,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[11]||(l[11]=t=>e.dialogFormVisible=t),title:"编辑Paper表单"},{footer:o(()=>[b("span",R,[a(p,{onClick:l[10]||(l[10]=t=>e.dialogFormVisible=!1)},{default:o(()=>[u("Cancel")]),_:1}),a(p,{type:"primary",onClick:e.save},{default:o(()=>[u(" 保存 ")]),_:1},8,["onClick"])])]),default:o(()=>[a(P,{model:e.Paper},{default:o(()=>[a(d,{label:"佐证材料","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.Paper.attachment,"onUpdate:modelValue":l[1]||(l[1]=t=>e.Paper.attachment=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(d,{label:"引用次数","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.Paper.count,"onUpdate:modelValue":l[2]||(l[2]=t=>e.Paper.count=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(d,{label:"论文编号","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.Paper.id,"onUpdate:modelValue":l[3]||(l[3]=t=>e.Paper.id=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(d,{label:"论文题目","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.Paper.name,"onUpdate:modelValue":l[4]||(l[4]=t=>e.Paper.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(d,{label:"刊物","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.Paper.publication,"onUpdate:modelValue":l[5]||(l[5]=t=>e.Paper.publication=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(d,{label:"刊物种类","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.Paper.publicationCate,"onUpdate:modelValue":l[6]||(l[6]=t=>e.Paper.publicationCate=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(d,{label:"发表时间","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.Paper.publishTime,"onUpdate:modelValue":l[7]||(l[7]=t=>e.Paper.publishTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(d,{label:"论文类型","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.Paper.type,"onUpdate:modelValue":l[8]||(l[8]=t=>e.Paper.type=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(d,{label:"作者","label-width":e.formLabelWidth},{default:o(()=>[a(i,{modelValue:e.Paper.userId,"onUpdate:modelValue":l[9]||(l[9]=t=>e.Paper.userId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Z=y(S,[["render",G]]);export{Z as default};
